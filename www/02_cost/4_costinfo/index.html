<?	include ("../../include/dbconn.php");
	include ("../../include/login_ch.php");
	include ("../../include/function.php");

	//error_reporting(E_ALL);
	//ini_set("display_errors", 1);

	$board_dbname	=	"tbl_junib";

	$h_idx				=	trim($_REQUEST[h_idx]);
	$target_date		=	trim($_REQUEST[target_date]);
	$s_date				=	trim($_REQUEST[s_date]);
	$e_date				=	trim($_REQUEST[e_date]);

	$target_date2		=	trim($_REQUEST[target_date2]);
	$s_date2			=	trim($_REQUEST[s_date2]);
	$e_date2			=	trim($_REQUEST[e_date2]);
	$bank_code			=	trim($_REQUEST[bank_code]);
	$jijum_code			=	trim($_REQUEST[jijum_code]);

	$h1					=	trim($_REQUEST[h1]);
	$i1					=	trim($_REQUEST[i1]);
	$j1					=	trim($_REQUEST[j1]);
	$memo				=	trim($_REQUEST[memo]);
	$kikan1_null_ch		=	trim($_REQUEST[kikan1_null_ch]);
	$kikan2_null_ch		=	trim($_REQUEST[kikan2_null_ch]);
	$bank_null_ch	=	trim($_REQUEST[bank_null_ch]);

	if($target_date=="") $target_date="doc_receive_date";
	if($s_date=="")		$s_date=date("Ymd");
	if($e_date=="")		$e_date=date("Ymd");


	$view_num		=	trim($_REQUEST[view_num]);	//한라인에 몇개를 출력할건지//
	if($_REQUEST[page]==""){$page=1;}else{$page=$_REQUEST[page];}
	$Page_List		=	10;							//링크페이지를 몇개씩 보여줄건지.. 1 / 2 / 3
	if(!$view_num)	$view_num=	100;					//리스트 갯수

	$wherequery = " where 1=1  ";

	if($h_idx!=""){
		$wherequery.= " and h_idx = ".$h_idx." ";
	}	else {
		$wherequery.= " and h_idx = ' '";
	}
	if($h1!="")				$wherequery.= " and h1 = '".$h1."' ";
	if($i1!="")				$wherequery.= " and i1 = '".$i1."' ";
	if($j1!="")				$wherequery.= " and (j1 like '%{$j1}%' or m1 like '%{$j1}%')";
	
	if($kikan1_null_ch=="Y"){
		if($target_date!="") {$imsi = " and ({$target_date}='' or {$target_date} is null )";}
		$wherequery.=$imsi;
	}else{
		if($target_date!=""){
			if(($s_date!="")&&($e_date!="")){
				$imsi = "";
				if($target_date!="") {$imsi = " and {$target_date} between ";}
				if($s_date==$e_date) {$imsi.= " {$s_date} and {$e_date} ";}
				if($s_date!=$e_date) {$imsi.= " {$s_date} and {$e_date} ";}
				$wherequery.=$imsi;
			}
		}
	}
	
	if($kikan2_null_ch=="Y"){
		if($target_date2!="") {$imsi = " and ({$target_date2}='' or {$target_date2} is null )";}
		$wherequery.=$imsi;
	}else{
		if($target_date2!=""){
			if(($s_date2!="")&&($e_date2!="")){
				$imsi = "";
				if($target_date2!="") {$imsi = " and {$target_date2} between ";}
				if($s_date2==$e_date2) {$imsi.= " {$s_date2} and {$e_date2} ";}
				if($s_date2!=$e_date2) {$imsi.= " {$s_date2} and {$e_date2} ";}
				$wherequery.=$imsi;
			}
		}
	}

  // 서류진행
	if($target_gubun=="al1_hope_yn"){
		$wherequery.= " and al1_hope_yn = 'y'";
	} else if($target_gubun=="al1_imp_yn"){
		$wherequery.= " and al1_imp_yn = 'y'";
	}

	//echo $wherequery;
	$rows_total = db_count_all($board_dbname,$wherequery);

?>


<!DOCTYPE html>
<html lang="kr">

<head>
<title>CS돌이</title>
<?include ("../../include/common.php");?>
</head>


<link rel="stylesheet" href="//code.jquery.com/ui/1.12.0/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>

<script>

$(function() {
		$( ".datepickx" ).datepicker({
			autosize: true,
			showOn: "button",
			buttonImage: "/images/calendar.gif",
			buttonImageOnly: true,
			changeMonth: true,
			changeYear: true,
			dateFormat: "yymmdd",
			dayNamesShort:["일","월","화","수","목","금","토"],
			monthNamesShort:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]
		});
	 $("img.ui-datepicker-trigger").attr("style", "margin-bottom:4px; vertical-align:middle; cursor: Pointer;");
});
$( ".datepickx" ).datepicker( "option", "dayNamesShort",  [ "Dim", "Lun", "Mar", "Mer", "Jeu", "Ven", "Sam" ] );






</script>


<body style="overflow:auto; width:3080px;">

<!--header 시작-->
	<?include ("../../include/header.php");?>
<!--header 종료-->


<!--top-메뉴시작-->
	<?include ("../../include/header_menu.php");?>
<!--top-메뉴종료-->


<div id="content">

  <div id="content-header">
    <div id="breadcrumb"> <a href="#" title="Go to Home" class="tip-bottom">비용관련</a> <a href="#" class="current">비용안내</a> </div>
  </div>

  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span12">

			<form name=ffx  method=post>
			<div  style="width:100%;background-color:#EFEFEF;border-top:1px solid #e7e7e7;border-left:1px solid #e7e7e7;border-right:1px solid #e7e7e7;">
				<input type=hidden name="view_num"  id="view_num"  value="<?=$view_num?>">
				<input type=hidden name="page"  id="page"  value="<?=$page?>">
				
				<table style="background-color:#EFEFEF;">
				  <thead>
					<tr>
					  <th style="text-align:left;margin-top:10px;">
						<div style="margin-left:592px;margin-bottom:5px;margin-top:5px;">
						<button type="button" class="btn btn-success" onclick="javascript:f_date0();"  style="background-color:#F29661;font-size:8pt;height:26px;">당일</button>
						<button type="button" class="btn btn-success" onclick="javascript:f_date1();"  style="background-color:#F29661;font-size:8pt;height:26px;">3일</button>
						<button type="button" class="btn btn-success" onclick="javascript:f_date2();"  style="background-color:#F29661;font-size:8pt;height:26px;">1주일</button>
						<button type="button" class="btn btn-success" onclick="javascript:f_date3();"  style="background-color:#F29661;font-size:8pt;height:26px;">2주일</button>
						<button type="button" class="btn btn-success" onclick="javascript:f_date4();"  style="background-color:#F29661;font-size:8pt;height:26px;">1개월</button>
						<button type="button" class="btn btn-success" onclick="javascript:f_date5();"  style="background-color:#F29661;font-size:8pt;height:26px;">3개월</button>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						&nbsp;&nbsp;&nbsp;&nbsp;
						<button type="button" class="btn btn-success" onclick="javascript:f_date20();"  style="background-color:#F29661;font-size:8pt;height:26px;">당일</button>
						<button type="button" class="btn btn-success" onclick="javascript:f_date21();"  style="background-color:#F29661;font-size:8pt;height:26px;">3일</button>
						<button type="button" class="btn btn-success" onclick="javascript:f_date22();"  style="background-color:#F29661;font-size:8pt;height:26px;">1주일</button>
						<button type="button" class="btn btn-success" onclick="javascript:f_date23();"  style="background-color:#F29661;font-size:8pt;height:26px;">2주일</button>
						<button type="button" class="btn btn-success" onclick="javascript:f_date24();"  style="background-color:#F29661;font-size:8pt;height:26px;">1개월</button>
						<button type="button" class="btn btn-success" onclick="javascript:f_date25();"  style="background-color:#F29661;font-size:8pt;height:26px;">3개월</button>
						</div>
						  &nbsp;&nbsp;&nbsp;&nbsp;현 장 명&nbsp;&nbsp;&nbsp;<?=f_hyunjang_select("h_idx",$h_idx," style='width:315px;'")?>&nbsp;&nbsp;

						  &nbsp;&nbsp;&nbsp;기 간&nbsp;&nbsp;&nbsp;<select name=target_date style="width:200px;">
						  <option value="comp_rec_date" <?if($target_date=="comp_rec_date"){?>selected<?}?>>완증수령일</option>
						  <option value="al1_acp_date" <?if($target_date=="al1_acp_date"){?>selected<?}?>>취득세신고</option>
						  <option value="vir_acc_date" <?if($target_date=="vir_acc_date"){?>selected<?}?>>가상계좌생성일</option>
						  <option value="gch1_cost_date" <?if($target_date=="gch1_cost_date"){?>selected<?}?>>1차비용안내</option>
						  <option value="gch2_cost_date" <?if($target_date=="gch2_cost_date"){?>selected<?}?>>2차비용안내</option>
						  <option value="ah1" <?if($target_date=="ah1"){?>selected<?}?>>수납일</option>
						  </select>&nbsp;
						    <input type="checkbox" id="kikan1_null_ch" name="kikan1_null_ch" <?if($kikan1_null_ch=="Y"){?>checked<?}?> value="Y">
						  <input type=text name="s_date" id="s_date" value="<?=$s_date?>"  class="datepickx" size=8 maxlength=8 style="width:80px;height:20px;">~<input type=text name="e_date" id="e_date" value="<?=$e_date?>"  class="datepickx" size=8 maxlength=8 style="width:80px;height:20px;">

						  &nbsp;&nbsp;&nbsp;기 간 2&nbsp;&nbsp;&nbsp;<select name=target_date2 style="width:200px;">
						  <option value="">-선택-</option>
						  <option value="comp_rec_date" <?if($target_date2=="comp_rec_date"){?>selected<?}?>>완증수령일</option>
						  <option value="al1_acp_date" <?if($target_date2=="al1_acp_date"){?>selected<?}?>>취득세신고</option>
						  <option value="vir_acc_date" <?if($target_date2=="vir_acc_date"){?>selected<?}?>>가상계좌생성일</option>
						  <option value="gch1_cost_date" <?if($target_date2=="gch1_cost_date"){?>selected<?}?>>1차비용안내</option>
						  <option value="gch2_cost_date" <?if($target_date2=="gch2_cost_date"){?>selected<?}?>>2차비용안내</option>
						  <option value="ah1" <?if($target_date2=="ah1"){?>selected<?}?>>수납일</option>
						  </select>&nbsp;
						    <input type="checkbox" id="kikan2_null_ch" name="kikan2_null_ch" <?if($kikan2_null_ch=="Y"){?>checked<?}?> value="Y">
						  <input type=text name="s_date2" id="s_date2" value="<?=$s_date2?>"  class="datepickx" size=8 maxlength=8 style="width:80px;height:20px;">~<input type=text name="e_date2" id="e_date2" value="<?=$e_date2?>"  class="datepickx" size=8 maxlength=8 style="width:80px;height:20px;">

						  <Br>
						  &nbsp;&nbsp;&nbsp;&nbsp;취본&nbsp;&nbsp;&nbsp;
						  <select name=target_gubun style="width:150px;">
							  <option value="">-선택-</option>
							  <option value="al1_hope_yn" <?if($target_gubun=="al1_hope_yn"){?>selected<?}?>>취득세본인납부희망</option>
							  <option value="al1_imp_yn" <?if($target_gubun=="al1_imp_yn"){?>selected<?}?>>취득세본인납부이행</option>
						  </select>&nbsp;
						  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;동&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type=text name="h1" value="<?=$h1?>" style="width:80px;">
						  &nbsp;&nbsp;&nbsp;호&nbsp;&nbsp;&nbsp;<input type=text name="i1" value="<?=$i1?>" style="width:80px;">
						  &nbsp;&nbsp;&nbsp;취득자&nbsp;&nbsp;&nbsp;<input type=text name="j1" value="<?=$j1?>" style="width:147px;">
					  </th>
					  <th>
						&nbsp;&nbsp;&nbsp;<button type="button" class="btn btn-success" onclick="javascript:f_submitx();" style="background-color:#4374D9;height:60px;width:60px;margin-top:25px;">조회</button>
					  </th>
					</tr>
				  </thead>
				</table>
			<table class="table table-bordered table-striped top_box" style="border-right:1px solid #e7e7e7;">
			  <thead>
				<tr style="height:40px;vertical-align: middle;">
				  <th style="text-align:left;border-right:0px;width:51%;"><b style="color:black;font-weight:bold;"><?if($h_idx!=""){?>현장명: <?=f_hyunjang_name($h_idx)?>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?}?>
				  <?if(($target_date!="")&&($s_date!="")&&($e_date!="")){?><?=f_cate2($target_date)?>: <?=f_date($s_date)?>~ <?=f_date($e_date)?>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?}?>
				  <?if(($target_date2!="")&&($s_date2!="")&&($e_date2!="")){?><?=f_cate2($target_date2)?>: <?=f_date($s_date2)?>~ <?=f_date($e_date2)?>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?}?>
				  총 <?=f_money0($rows_total)?>건</b>
				  </th>
				  <th style="text-align:left;border-left:0px;">
					<button type="button" class="btn btn-success" onclick="javascript:f_excel();"  style="background-color:#F29661;">엑셀다운로드</button>&nbsp;&nbsp;
					<button type="button" class="btn btn-success" onclick="javascript:f_detail_excel();"  style="background-color:#F29661;">비용안내용엑셀데이터</button>&nbsp;&nbsp;
				  </th>
				</tr>
			  </thead>
			</table>
			<table class="table table-bordered table-striped top_box" style="border-right:1px solid #e7e7e7;">
			  <thead>
				<tr style="height:45px;vertical-align: middle;">
				  <th style="text-align:left;border-left:0px;width:1400px;" >
						<b style="color:red;font-weight:bold;font-size:12pt;">&nbsp;&nbsp;&nbsp;※ 비용안내전 알아야 할 사항</b><br>
					<b style="color:blue;font-weight:bold;bold;font-size:10pt;">&nbsp;&nbsp;&nbsp;1) 취득세산정 및 이전채권산정(반드시 선이행 필요)<br>
					&nbsp;&nbsp;&nbsp;2) 보수료등(신탁말소보수, 제증명, 소이등보수) 셋팅필요.(안하는 경우 공란으로 표시됨)<br>
					&nbsp;&nbsp;&nbsp;3) 신탁말소등록세는 수동으로 계산하여 입력한다.<br>
					&nbsp;&nbsp;&nbsp;4) 설정채권은 채권최고액만 입력이 되어 있으면 자동으로 계산함(감면, 본인채권여부 적용안됨)<br>
					&nbsp;&nbsp;&nbsp;5) 인지는 자동계산된 값 적용됨(본인인지 적용안됨. 완납증명서 및 승계여부, 프리미엄 입력 안된 경우 틀린 값 도출됨.)<br>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 기타공과금산정 페이지에서 선작업 필요없음</b>
			  	</th>
				  <th style="text-align:left;border-left:0px;" >
					<button type="button" class="btn btn-success" onclick="javascript:apply_bosu_set();" style="background-color:#F29661;">비용계산</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<button type="button" class="btn btn-success" onclick="javascript:f_chogi();"  style="background-color:#F29661;">초기화</button>&nbsp;&nbsp;&nbsp;&nbsp;
					적용날짜 <input type=text name="apply_date" id="apply_date" value="<?=date("Ymd")?>"  class="datepickx" size=8 maxlength=8 style="width:70px;height:15px;">
					<button type="button" class="btn btn-success" onclick="javascript:apply();" style="background-color:#F29661;">적용</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							<br>
			  	</th>
				</tr>
			  </thead>
			</table>
			</div>
			</form>
		</div>


	<form name=ffm method="post">
		<input type=hidden name="list_num"  id="list_num"  value="<?=$view_num?>">

        <div class="widget-box">
          <div class="widget-content nopadding">
            <table class="table table-bordered table-striped">
 
              <thead>
                <tr>
                  <th style="font-size:8pt;" rowspan=2>No</th>
                  <th style="font-size:8pt;" rowspan=2>동</th>
                  <th style="font-size:8pt;" rowspan=2>호</th>
                  <th style="font-size:8pt;" rowspan=2>취득자</th>
                  <th style="font-size:8pt;" rowspan=2>전화번호1</th>

                  <th style="font-size:8pt;" rowspan=2>완증<br>수령일</th>
                  <th style="font-size:8pt;" rowspan=2>취득세<br>신고일</th>
                  <th style="font-size:8pt;" rowspan=2>가상계좌<br>생성일</th>
                  <th style="font-size:8pt;" rowspan=2>수납일</th>

                  <th style="font-size:8pt;width:105px;" rowspan=2><input type="checkbox" id="gch1_cost_date_ch" name="gch1_cost_date_ch"> 1차비용안내일</th>
                  <th style="font-size:8pt;width:105px;" rowspan=2><input type="checkbox" id="gch2_cost_date_ch" name="gch2_cost_date_ch"> 2차비용안내일</th>
                  <th style="font-size:8pt;width:105px;" rowspan=2><input type="checkbox" id="dun_cost_date_ch" name="dun_cost_date_ch"> 비용독촉안내일</th>
                  <th style="font-size:8pt;" rowspan=2>수납액</th>
                  <th style="font-size:8pt;" rowspan=2>전자</th>
                  <th style="font-size:8pt;" rowspan=2>가상</th>
                  <th style="font-size:8pt;" rowspan=2>다주택<br>여부</th>
                  <th style="font-size:8pt;" rowspan=2>수납<br>결과</th>
                  <th style="font-size:8pt;width:105px;" rowspan=2><input type="checkbox" id="pay_dead_date_ch" name="pay_dead_date_ch"> 납부기한</th>
                  <th style="font-size:8pt;" rowspan=2>취본<br>희망</th>
                  <th style="font-size:8pt;" rowspan=2>취본<br>납부</th>

                  <th style="font-size:8pt;" rowspan=2>취득세</th>
                  <th style="font-size:8pt;" rowspan=2>인지세</th>
                  <th style="font-size:8pt;"><input type=text name="apply_dis" id="apply_dis" size=8 style="width:40px;height:15px;font-size:8pt;text-align:right;" onkeyup="onlyNum(this);this.value=this.value.comma();">%<br><button type="button" class="btn btn-success" onclick="javascript:apply_dis_set();" style="background-color:#F29661;">적용</button></th>
                  <th style="font-size:8pt;" rowspan=2>이전채권<br>본인부담금</th>
                  <th style="font-size:8pt;" rowspan=2>설정채권<br>본인부담금</th>
                  <th style="font-size:8pt;"><input type=text name="apply_jeng" id="apply_jeng" value="13,000" size=8 style="width:60px;height:15px;font-size:8pt;text-align:right;" onkeyup="onlyNum(this);this.value=this.value.comma();"><br><button type="button" class="btn btn-success" onclick="javascript:apply_jeng_set();" style="background-color:#F29661;">적용</button></th>
                  <th style="font-size:8pt;"><input type=text name="apply_scost" id="apply_scost" size=8 style="width:60px;height:15px;font-size:8pt;text-align:right;" onkeyup="onlyNum(this);this.value=this.value.comma();"><br><button type="button" class="btn btn-success" onclick="javascript:apply_scost_set();" style="background-color:#F29661;">적용</button></th>
                  <th style="font-size:8pt;"><input type=text name="apply_sccost" id="apply_sccost" size=8 style="width:60px;height:15px;font-size:8pt;text-align:right;" onkeyup="onlyNum(this);this.value=this.value.comma();"><br><button type="button" class="btn btn-success" onclick="javascript:apply_sccost_set();" style="background-color:#F29661;">적용</button></th>
                  <th style="font-size:8pt;"><input type=text name="apply_jae" id="apply_jae" size=8 style="width:60px;height:15px;font-size:8pt;text-align:right;" onkeyup="onlyNum(this);this.value=this.value.comma();"><br><button type="button" class="btn btn-success" onclick="javascript:apply_jae_set();" style="background-color:#F29661;">적용</button></th>
                  <th style="font-size:8pt;"><input type=text name="apply_soi" id="apply_soi" size=8 style="width:60px;height:15px;font-size:8pt;text-align:right;" onkeyup="onlyNum(this);this.value=this.value.comma();"><br><button type="button" class="btn btn-success" onclick="javascript:apply_soi_set();" style="background-color:#F29661;">적용</button></th>
                  <th style="font-size:8pt;" rowspan=2>그외비용소계</th>
                  <th style="font-size:8pt;" rowspan=2>총비용</th>
                  <th style="font-size:8pt;width:105px;"><select class="apply_1cha" name="apply_1cha" id="apply_1cha" style="width:120px;height:25px;font-size:8pt;margin-top:10px;">
										<option>--선택--</option>
										<option value="1" <?if($apply_1cha=="1"){?>selected<?}?>>Normal</option>
										<option value="2" <?if($apply_1cha=="2"){?>selected<?}?>>총비용</option>
										<option value="3" <?if($apply_1cha=="3"){?>selected<?}?>>그외비용</option>
										<option value="4" <?if($apply_1cha=="4"){?>selected<?}?>>취득세Only</option>
										<option value="5" <?if($apply_1cha=="5"){?>selected<?}?>>취득세Only(취본)</option>
									  </select><br><button type="button" class="btn btn-success" onclick="javascript:apply_1cha_set();" style="background-color:#F29661;">적용</button></th>
                  <th style="font-size:8pt;width:105px;"><select class="apply_2cha" name="apply_2cha" id="apply_2cha" style="width:120px;height:25px;font-size:8pt;margin-top:10px;">
										<option>--선택--</option>
										<option value="1" <?if($apply_2cha=="1"){?>selected<?}?>>총비용-수납금액</option>
										<option value="2" <?if($apply_2cha=="2"){?>selected<?}?>>그외비용</option>
										<option value="3" <?if($apply_2cha=="3"){?>selected<?}?>>취득세Only</option>
									  </select><br><button type="button" class="btn btn-success" onclick="javascript:apply_2cha_set();" style="background-color:#F29661;">적용</button></th>
                </tr>

                <tr>
                  <th style="font-size:8pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;채권할인<br><input type="checkbox" id="bond_sale_rate_ch" name="bond_sale_rate_ch">&nbsp;&nbsp;&nbsp;&nbsp;율(%)</th>
                  <th style="font-size:8pt;"><input type="checkbox" id="an1_by_ch" name="an1_by_ch"> 증지</th>
                  <th style="font-size:8pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;신탁말소<br><input type="checkbox" id="as1_by_ch" name="as1_by_ch">&nbsp;&nbsp;&nbsp;&nbsp;보수료</th>
                  <th style="font-size:8pt;">&nbsp;&nbsp;&nbsp;신탁말소</br><input type="checkbox" id="ao1_by_ch" name="ao1_by_ch">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;등록세&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                  <th style="font-size:8pt;"><input type="checkbox" id="ap1_by_ch" name="ap1_by_ch"> 제증명</th>
                  <th style="font-size:8pt;">&nbsp;&nbsp;&nbsp;소이등<br><input type="checkbox" id="aq1_by_ch" name="aq1_by_ch">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;보수료&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                  <th style="font-size:8pt;width:105px;">&nbsp;&nbsp;&nbsp;1차비용<br><input type="checkbox" id="gch1_cost_ch" name="gch1_cost_ch"> &nbsp;&nbsp;&nbsp;안내금액&nbsp;&nbsp;&nbsp;</th>
                  <th style="font-size:8pt;width:105px;">&nbsp;&nbsp;&nbsp;2차비용<br><input type="checkbox" id="gch2_cost_ch" name="gch2_cost_ch"> &nbsp;&nbsp;&nbsp;안내금액&nbsp;&nbsp;&nbsp;</th>
                </tr>

              </thead>
              <tbody>

	<?
	$Link_Value = "?list_num={$view_num}&s_gubun=$s_gubun&s_search=$s_search";
	$Page_link = _Make_Link($rows_total,$view_num,$Page_List,$page,$Link_Value,$img_pp,$img_p,$img_nn,$img_n);

	$sql = "select *, if(m1='',j1,CONCAT(j1, ',', m1)) as jm1 from $board_dbname  $wherequery order by  cast(a1 as unsigned) asc limit $Page_link[start],$view_num";
//	$sql = "select * from $board_dbname  $wherequery order by  cast(h1 as unsigned) asc,cast(i1 as unsigned) asc limit $Page_link[start],$view_num";
//	echo $sql;
	$stmt = $pdo->prepare($sql);
	$stmt->execute();

	$rows = $pdo->query('SELECT FOUND_ROWS()')->fetchColumn();

	if($rows > 0){
		$T=1;$i=1;
			while($row = $stmt->fetch()){?>


				<input type=hidden name="idx_<?=$i?>" value="<?=$row[idx]?>">
				<input type=hidden name="a1_<?=$i?>" value="<?=$row[a1]?>">

				<input type=hidden name="gchi1_rec_cost_<?=$i?>" value="<?=$row[gchi1_rec_cost]?>">
				<input type=hidden name="gchi2_rec_cost_<?=$i?>" value="<?=$row[gchi2_rec_cost]?>">
				<input type=hidden name="me_prepur_cost1_<?=$i?>" value="<?=$row[me_prepur_cost1]?>">
				<input type=hidden name="me_prepur_cost2_<?=$i?>" value="<?=$row[me_prepur_cost2]?>">
				<input type=hidden name="av1_<?=$i?>" value="<?=$row[av1]?>">
				<input type=hidden name="ax1_<?=$i?>" value="<?=$row[ax1]?>">
				<input type=hidden name="ay1_<?=$i?>" value="<?=$row[ay1]?>">
				<input type=hidden name="az1_<?=$i?>" value="<?=$row[az1]?>">
				<input type=hidden name="f1_<?=$i?>" value="<?=$row[f1]?>">
				<input type=hidden name="s_sum_<?=$i?>" value="<?=f_money(f_de_comma($row[total_sum])-f_de_comma($row[ai1]))?>">
				<input type=hidden name="ijeun_cost_<?=$i?>" value="<?=f_money(f_de_comma($row[total_sum])-f_de_comma($row[ai1]))?>">
				<input type=hidden name="suljung_cost_<?=$i?>" value="<?=f_money(f_de_comma($row[total_sum])-f_de_comma($row[ai1]))?>">
				
				<input type=hidden name="ijeon_bosu_<?=$i?>" value="<?=f_member_cost_value($row[a1],'1')?>">
				<input type=hidden name="proof_cost_<?=$i?>" value="<?=f_member_cost_value($row[a1],'2')?>">
				<input type=hidden name="sintak_bosu_<?=$i?>" value="<?=f_member_cost_value($row[a1],'3')?>">

                <tr class="odd gradeX">
                	<td style="text-align:center;font-size:8pt;"><?=($page-1)*$view_num+$T?></td>
                	<td style="text-align:center;font-size:8pt;"><?=$row[h1]?></td>
                	<td style="text-align:center;font-size:8pt;"><?=$row[i1]?></td>
                	<td style="text-align:center;font-size:8pt;"><a href="javascript:f_popup_s('<?=$row[a1]?>');"  style="text-decoration:underline;color:red;"><?=$row[jm1]?></td>
                	<td style="text-align:center;font-size:8pt;"><?=$row[p1]?></td>

                  <td style="text-align:center;font-size:8pt;"><?=f_date2($row[comp_rec_date])?></td>
                  <td style="text-align:center;font-size:8pt;"><?=f_date2($row[al1_acp_date])?></td>
                  <td style="text-align:center;font-size:8pt;"><?=f_date2($row[vir_acc_date])?></td>
                  <td style="text-align:center;font-size:8pt;"><?=f_date2($row[ah1])?></td>

                  <td style="text-align:center;font-size:8pt;"><input type="checkbox" name="gch1_cost_date1_<?=$i?>" class="gch1_cost_date" value="y">&nbsp;<input type=text class="gch1_cost_date_xx datepickx" name="gch1_cost_date_<?=$i?>" value="<?=$row[gch1_cost_date]?>"  size=8 maxlength=8 style="width:48px;height:15px;font-size:8pt;"  onfocus='javascript:focusFunction(this);'></td>
                  <td style="text-align:center;font-size:8pt;"><input type="checkbox" name="gch2_cost_date1_<?=$i?>" class="gch2_cost_date" value="y">&nbsp;<input type=text class="gch2_cost_date_xx datepickx" name="gch2_cost_date_<?=$i?>" value="<?=$row[gch2_cost_date]?>"  size=8 maxlength=8 style="width:48px;height:15px;font-size:8pt;"  onfocus='javascript:focusFunction(this);'></td>
                  <td style="text-align:center;font-size:8pt;"><input type="checkbox" name="dun_cost_date1_<?=$i?>" class="dun_cost_date" value="y">&nbsp;<input type=text class="dun_cost_date_xx datepickx" name="dun_cost_date_<?=$i?>" value="<?=$row[dun_cost_date]?>"  size=8 maxlength=8 style="width:48px;height:15px;font-size:8pt;"  onfocus='javascript:focusFunction(this);'></td>
                	<td style="text-align:center;font-size:8pt;"><a href="javascript:f_popup_g('<?=$row[h_idx]?>','<?=$row[h1]?>','<?=$row[i1]?>','<?=$row[comp_rec_date]?>','<?=$row[comp_rec_date]?>');"  style="color:red;"><?=f_money($row[ai1])?></td>
                	<td style="text-align:center;font-size:8pt;"><a href="javascript:f_popup_h('<?=$row[h_idx]?>','<?=$row[h1]?>','<?=$row[i1]?>','<?=$row[comp_rec_date]?>','<?=$row[comp_rec_date]?>');"  style="color:red;"><?if($row[elc_no]!=""){?>O<?}?></td>
                	<td style="text-align:center;font-size:8pt;"><a href="javascript:f_popup_g('<?=$row[h_idx]?>','<?=$row[h1]?>','<?=$row[i1]?>','<?=$row[comp_rec_date]?>','<?=$row[comp_rec_date]?>');"  style="color:red;"><?if($row[vir_acc_no]!=""){?>O<?}?></td>
                	<td style="text-align:center;font-size:8pt;"><?=f_multihouse_type_value($row[multi_housing_type])?></td>
                  <?if($row[al1_hope_yn]=="y"||$row[al1_imp_yn]=="y"){
	                  		if(($row[total_sum]-$row[al1]-$row[ai1])!=0){
	                  ?>
	                  <td style="text-align:center;font-size:8pt;"><?=f_money($row[total_sum]-$row[al1]-$row[ai1])?></td>
	                  <?	}else{	?>
	                  <td style="text-align:center;font-size:8pt;">ok</td>
	                  <?	}	?>
                  <?} else{	
                  		if(($row[total_sum]-$row[ai1])!=0){
	                  ?>
	                  <td style="text-align:center;font-size:8pt;"><?=f_money($row[total_sum]-$row[ai1])?></td>
	                  <?	}else{	?>
	                  <td style="text-align:center;font-size:8pt;">ok</td>
	                  <?	}	?>
	                <?}	?>
                  <td style="text-align:center;font-size:8pt;"><input type="checkbox" name="pay_dead_date1_<?=$i?>" class="pay_dead_date" value="y">&nbsp;<input type=text class="pay_dead_date_xx datepickx" name="pay_dead_date_<?=$i?>" value="<?=$row[pay_dead_date]?>"  size=8 maxlength=8 style="width:48px;height:15px;font-size:8pt;"  onfocus='javascript:focusFunction(this);'></td>
                  <td style="text-align:center;font-size:8pt;"><input type="checkbox" name="al1_hope_yn_<?=$i?>" class="al1_hope_yn" value="y" <?if($row[al1_hope_yn]=="y"){?>checked<?}?>></td>
                  <td style="text-align:center;font-size:8pt;"><input type="checkbox" name="al1_imp_yn_<?=$i?>" class="al1_imp_yn" value="y" <?if($row[al1_imp_yn]=="y"){?>checked<?}?>></td>

                	<td style="text-align:center;font-size:8pt;"><input type=text class="al1_xx"  name="al1_<?=$i?>" value="<?=f_money($row[al1])?>" style="width:70px;height:15px;font-size:8pt;text-align:right;" onkeydown="nextFocus(ax1_<?=$i+1?>)" onkeyup="onlyNum(this);this.value=this.value.comma();" onchange="f_onchange(<?=$i?>);"></td>
                	<td style="text-align:center;font-size:8pt;"><input type=text class="am1_pur_cost_xx"  name="am1_pur_cost_<?=$i?>" value="<?=f_money($row[am1_pur_cost])?>" style="width:50px;height:15px;font-size:8pt;text-align:right;" onkeydown="nextFocus(ax1_<?=$i+1?>)" onkeyup="onlyNum(this);this.value=this.value.comma();" onchange="f_onchange(<?=$i?>);"></td>
                	<td style="text-align:center;font-size:8pt;"><input type="checkbox" name="bond_sale_rate1_<?=$i?>" class="bond_sale_rate" value="y">&nbsp;<input type=text class="bond_sale_rate_xx"  name="bond_sale_rate_<?=$i?>" value="<?=f_money($row[bond_sale_rate])?>" style="width:30px;height:15px;font-size:8pt;text-align:right;" onkeydown="nextFocus(ax1_<?=$i+1?>)" onkeyup="onlyNum(this);this.value=this.value.comma();" onfocus='javascript:focusFunction(this);'>%</td>
                	<td style="text-align:center;font-size:8pt;"><input type=text class="aj1_tmp_xx"  name="aj1_tmp_<?=$i?>" value="<?=f_money($row[aj1_tmp])?>" style="width:50px;height:15px;font-size:8pt;text-align:right;" onkeydown="nextFocus(ax1_<?=$i+1?>)" onkeyup="onlyNum(this);this.value=this.value.comma();" onchange="f_onchange(<?=$i?>);"></td>
                	<td style="text-align:center;font-size:8pt;"><input type=text class="ak1_tmp_xx"  name="ak1_tmp_<?=$i?>" value="<?=f_money($row[ak1_tmp])?>" style="width:50px;height:15px;font-size:8pt;text-align:right;" onkeydown="nextFocus(ax1_<?=$i+1?>)" onkeyup="onlyNum(this);this.value=this.value.comma();" onchange="f_onchange(<?=$i?>);"></td>
                	<td style="text-align:center;font-size:8pt;"><input type="checkbox" name="an1_by1_<?=$i?>" class="an1_by" value="y">&nbsp;<input type=text class="an1_by_xx"  name="an1_by_<?=$i?>" value="<?=f_money($row[an1_by])?>" style="width:50px;height:15px;font-size:8pt;text-align:right;" onkeydown="nextFocus(ax1_<?=$i+1?>)" onkeyup="onlyNum(this);this.value=this.value.comma();" onfocus='javascript:focusFunction(this);' onchange="f_onchange(<?=$i?>);"></td>
                	<td style="text-align:center;font-size:8pt;"><input type="checkbox" name="as1_by1_<?=$i?>" class="as1_by" value="y">&nbsp;<input type=text class="as1_by_xx"  name="as1_by_<?=$i?>" value="<?=f_money($row[as1_by])?>" style="width:50px;height:15px;font-size:8pt;text-align:right;" onkeydown="nextFocus(ax1_<?=$i+1?>)" onkeyup="onlyNum(this);this.value=this.value.comma();" onfocus='javascript:focusFunction(this);' onchange="f_onchange(<?=$i?>);"></td>
                	<td style="text-align:center;font-size:8pt;"><input type="checkbox" name="ao1_by1_<?=$i?>" class="ao1_by" value="y">&nbsp;<input type=text class="ao1_by_xx"  name="ao1_by_<?=$i?>" value="<?=f_money($row[ao1_by])?>" style="width:50px;height:15px;font-size:8pt;text-align:right;" onkeydown="nextFocus(ax1_<?=$i+1?>)" onkeyup="onlyNum(this);this.value=this.value.comma();" onfocus='javascript:focusFunction(this);' onchange="f_onchange(<?=$i?>);"></td>
                	<td style="text-align:center;font-size:8pt;"><input type="checkbox" name="ap1_by1_<?=$i?>" class="ap1_by" value="y">&nbsp;<input type=text class="ap1_by_xx"  name="ap1_by_<?=$i?>" value="<?=f_money($row[ap1_by])?>" style="width:50px;height:15px;font-size:8pt;text-align:right;" onkeydown="nextFocus(ax1_<?=$i+1?>)" onkeyup="onlyNum(this);this.value=this.value.comma();" onfocus='javascript:focusFunction(this);' onchange="f_onchange(<?=$i?>);"></td>
                	<td style="text-align:center;font-size:8pt;"><input type="checkbox" name="aq1_by1_<?=$i?>" class="aq1_by" value="y">&nbsp;<input type=text class="aq1_by_xx"  name="aq1_by_<?=$i?>" value="<?=f_money($row[aq1_by])?>" style="width:50px;height:15px;font-size:8pt;text-align:right;" onkeydown="nextFocus(ax1_<?=$i+1?>)" onkeyup="onlyNum(this);this.value=this.value.comma();" onfocus='javascript:focusFunction(this);' onchange="f_onchange(<?=$i?>);"></td>
                	<td style="text-align:center;font-size:8pt;"><input type=text class="etc_cost_sum_xx"  name="etc_cost_sum_<?=$i?>" value="<?=f_money($row[etc_cost_sum])?>" style="width:50px;height:15px;font-size:8pt;text-align:right;" onkeydown="nextFocus(ax1_<?=$i+1?>)" onkeyup="onlyNum(this);this.value=this.value.comma();" onchange="f_onchange(<?=$i?>);"></td>
                	<td style="text-align:center;font-size:8pt;"><input type=text class="total_sum_xx"  name="total_sum_<?=$i?>" value="<?=f_money($row[total_sum])?>" style="width:70px;height:15px;font-size:8pt;text-align:right;" onkeydown="nextFocus(ax1_<?=$i+1?>)" onkeyup="onlyNum(this);this.value=this.value.comma();"></td>
                	<td style="text-align:center;font-size:8pt;"><input type="checkbox" name="gch1_cost1_<?=$i?>" class="gch1_cost" value="y">&nbsp;<input type=text class="gch1_cost_xx"  name="gch1_cost_<?=$i?>" value="<?=f_money($row[gch1_cost])?>" style="width:70px;height:15px;font-size:8pt;text-align:right;" onkeydown="nextFocus(gch1_cost_<?=$i+1?>)" onkeyup="onlyNum(this);this.value=this.value.comma();" onfocus='javascript:focusFunction(this);'></td>
                	<td style="text-align:center;font-size:8pt;"><input type="checkbox" name="gch2_cost1_<?=$i?>" class="gch2_cost" value="y">&nbsp;<input type=text class="gch2_cost_xx"  name="gch2_cost_<?=$i?>" value="<?=f_money($row[gch2_cost])?>" style="width:70px;height:15px;font-size:8pt;text-align:right;" onkeydown="nextFocus(gch2_cost_<?=$i+1?>)" onkeyup="onlyNum(this);this.value=this.value.comma();" onfocus='javascript:focusFunction(this);'></td>

                </tr>


	<?$T++;$i++;}
}else{?>
              <tr class="title">
                <td colspan=34 align=center>내용이 없습니다.</td>
              </tr>
<?}?>


              </tbody>
            </table>
          </div>
        </div>

		<div class="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix" style="height:30px;">
			<div class="dataTables_filter" id="DataTables_Table_0_filter"><label  style="float:left;">페이지당 </label>&nbsp;<select name="view_num" style="width:80px;" onchange="javascript:f_movex(this);">
					<option selected="selected" value="10" <?if($view_num==10){?>selected<?}?>>10</option>
					<option value="15" <?if($view_num==15){?>selected<?}?>>15</option>
					<option value="20" <?if($view_num==20){?>selected<?}?>>20</option>
					<option value="30" <?if($view_num==30){?>selected<?}?>>30</option>
					<option value="30" <?if($view_num==50){?>selected<?}?>>50</option>
					<option value="100" <?if($view_num==100){?>selected<?}?>>100</option>
					<option value="200" <?if($view_num==200){?>selected<?}?>>200</option>
					<option value="300" <?if($view_num==300){?>selected<?}?>>300</option>
				</select>
			</div>
			<?include $_SERVER["DOCUMENT_ROOT"]."/include/paging.php";?>


<?if($_SESSION["admin_permission"][ch_d62]=="y"){?>
		<?	if($rows > 0){  ?>
				<div style="float:right;margin-top:-25px;margin-bottom:10px;margin-right:1150px;">
					<button type="button" class="btn btn-success" onclick="javascript:f_submit();">저장</button>
				</div>
		<?	} else {  ?>
				<div style="float:right;margin-top:0px;margin-bottom:10px;margin-right:1150px;">
					<button type="button" class="btn btn-success" onclick="javascript:f_submit();">저장</button>
				</div>
		<?	}  ?>
<?}?>
		</div>

		</form>

    </div>
  </div>
</div>

<!--bottom-시작-->
	<?include ("../../include/bottom.php");?>
<!--bottom-종료-->

<script src="/js/common.js"></script>
<script src="/js/bootstrap.min.js"></script>

<script>

function f_popup_s(a1){//설정상세조회
	var url    ="/01_fdata/1_finput/regist.php?a1="+encodeURI(a1);
	var title  = "listpops";
	var status = "toolbar=no,directories=no,scrollbars=yes,resizable=no,status=no,menubar=no,width=1890, height=950, top=0,left=20"; 
	var a = window.open(url, title,status);
	a.focus();
}

function f_popup_g(h_idx,h1,i1,s_date,e_date){//가상계좌/수납 화면으로
	var url    ="/02_cost/3_vaccount/index.html?h_idx="+encodeURI(h_idx)+"&h1="+encodeURI(h1)+"&i1="+encodeURI(i1)+"&target_date=comp_rec_date&s_date="+encodeURI(s_date)+"&e_date="+encodeURI(e_date);
	var title  = "listpops";
	var status = "toolbar=no,directories=no,scrollbars=yes,resizable=no,status=no,menubar=no,width=1400, height=840, top=0,left=20"; 
	var a = window.open(url, title,status);
	a.focus();
}

function f_popup_h(h_idx,h1,i1,s_date,e_date){//취득세신고 화면으로
	var url    ="/02_cost/2_taxreport/index.html?h_idx="+encodeURI(h_idx)+"&h1="+encodeURI(h1)+"&i1="+encodeURI(i1)+"&target_date=comp_rec_date&s_date="+encodeURI(s_date)+"&e_date="+encodeURI(e_date);
	var title  = "listpops";
	var status = "toolbar=no,directories=no,scrollbars=yes,resizable=no,status=no,menubar=no,width=1400, height=840, top=0,left=20"; 
	var a = window.open(url, title,status);
	a.focus();
}

function f_chogi(){  //초기화
	if(confirm("초기화 하시겠습니까?")){

			$("#gch1_cost_date_ch").prop("checked", false);
			$("#gch2_cost_date_ch").prop("checked", false);
			$("#dun_cost_date_ch").prop("checked", false);
			$("#pay_dead_date_ch").prop("checked", false);
			$("#bond_sale_rate_ch").prop("checked", false);
			$("#an1_by_ch").prop("checked", false);
			$("#as1_by_ch").prop("checked", false);
			$("#ao1_by_ch").prop("checked", false);
			$("#ap1_by_ch").prop("checked", false);
			$("#aq1_by_ch").prop("checked", false);
			$("#gch1_cost_ch").prop("checked", false);
			$("#gch2_cost_ch_ch").prop("checked", false);

			$(".gch1_cost_date").prop("checked", false);
			$(".gch2_cost_date").prop("checked", false);
			$(".dun_cost_date").prop("checked", false);
			$(".pay_dead_date").prop("checked", false);
			$(".bond_sale_rate").prop("checked", false);
			$(".an1_by").prop("checked", false);
			$(".as1_by").prop("checked", false);
			$(".ap1_by").prop("checked", false);
			$(".ap1_by").prop("checked", false);
			$(".aq1_by").prop("checked", false);
			$(".gch1_cost").prop("checked", false);
			$(".gch2_cost_ch").prop("checked", false);

			$(".gch1_cost_date_xx").val("");
			$(".gch2_cost_date_xx").val("");
			$(".dun_cost_date_xx").val("");
			$(".pay_dead_date_xx").val("");
			$(".bond_sale_rate_xx").val("");
			$(".an1_by_xx").val("");
			$(".as1_by_xx").val("");
			$(".ao1_by_xx").val("");
			$(".ap1_by_xx").val("");
			$(".aq1_by_xx").val("");
			$(".gch1_cost_xx").val("");
			$(".gch2_cost_ch_xx").val("");
			
	}
}
// 채권매입액산정_이전채권.html에서 <(취득자1채권매입액-본인채권매입금액1)+ (취득자2채권매입액-본인채권매입금액2)+(취득자3채권매입액)>을 채권매입액으로 하여, 채권할인율을 곱한 값을 "이전채권본인부담금(3)"에 입력한다.
// 채권최고액1*1%)* 할인율 + (채권최고액2*1%)* 할인율 + (채권최고액3*1%)* 할인율 + (채권최고액4*1%)* 할인율 / 설정갯수가 0인경우에는 0원 입력(무대출이므로~)

function apply_dis_set(){  //채권할인율 적용
			//alert($("#apply_date").val());
	for(i=1;i<=<?=$view_num?>;i++){
		if($("#apply_dis").val()!=""){  //날짜일때
			if($("input:checkbox[name='bond_sale_rate1_"+i+"']").is(":checked")==true){
				$("input:text[name='bond_sale_rate_"+i+"']").val($("#apply_dis").val());
				// 이전채권본인부담금 계산 
				if($("input:hidden[name='gchi1_rec_cost_"+i+"']").val()!=""){
					a = Number(de_comma($("input:hidden[name='gchi1_rec_cost_"+i+"']").val()));
				} else {
					a = 0;
				}
				if($("input:hidden[name='gchi2_rec_cost_"+i+"']").val()!=""){
					b = Number(de_comma($("input:hidden[name='gchi2_rec_cost_"+i+"']").val()));
				} else {
					b = 0;
				}
				if($("input:hidden[name='me_prepur_cost1_"+i+"']").val()!=""){
					c = Number(de_comma($("input:hidden[name='me_prepur_cost1_"+i+"']").val()));
				} else {
					c = 0;
				}
				if($("input:hidden[name='me_prepur_cost2_"+i+"']").val()!=""){
					d = Number(de_comma($("input:hidden[name='me_prepur_cost2_"+i+"']").val()));
				} else {
					d = 0;
				}
				if($("input:text[name='bond_sale_rate_"+i+"']").val()!=""){
					e = Number(de_comma($("input:text[name='bond_sale_rate_"+i+"']").val()));
				} else {
					e = 0;
				}
				// 원단위 절삭 소숫점 필요시 수정
				//f = Math.floor((a - c + b - d) * e / 100 / 10) * 10 ;
//				if(e!="0"){
					f = Math.floor((a - c + b - d) * e / 100 );
//				} else {
//					f = Math.floor(a - c + b - d);
//				}
				$("input:text[name='aj1_tmp_"+i+"']").val(commax(f));

				// 설정채권본인부담금 계산 
				if($("input:hidden[name='av1_"+i+"']").val()!=""){
					a1 = Number(de_comma($("input:hidden[name='av1_"+i+"']").val()));
				} else {
					a1 = 0;
				}
				if($("input:hidden[name='ax1_"+i+"']").val()!=""){
					b1 = Number(de_comma($("input:hidden[name='ax1_"+i+"']").val()));
				} else {
					b1 = 0;
				}
				if($("input:hidden[name='ay1_"+i+"']").val()!=""){
					c1 = Number(de_comma($("input:hidden[name='ay1_"+i+"']").val()));
				} else {
					c1 = 0;
				}
				if($("input:hidden[name='az1_"+i+"']").val()!=""){
					d1 = Number(de_comma($("input:hidden[name='az1_"+i+"']").val()));
				} else {
					d1 = 0;
				}
				if($("input:hidden[name='f1_"+i+"']").val()!=""){
					e1 = Number(de_comma($("input:hidden[name='f1_"+i+"']").val()));
				} else {
					e1 = 0;
				}
				if (e1==0) {
					f1 = 0;
				} else {
					// 원단위 절삭 소숫점 필요시 수정
					//f1 =  Math.floor(((a1 * 0.01 * e / 100 ) + (b1 * 0.01 * e / 100 ) + (c1 * 0.01 * e / 100 ) + (d1 * 0.01 * e / 100 )) / 10 ) * 10 ;
//					if(e!="0"){
						f1 =  Math.floor((a1 * 0.01 * e / 100 ) + (b1 * 0.01 * e / 100 ) + (c1 * 0.01 * e / 100 ) + (d1 * 0.01 * e / 100 )) ;
//					} else {
//						f1 =  Math.floor((a1 * 0.01) + (b1 * 0.01) + (c1 * 0.01) + (d1 * 0.01)) ;
//					}
				}
				$("input:text[name='ak1_tmp_"+i+"']").val(commax(f1));

	//					alert($("input:text[name='an1_"+i+"']").val());
			}
			f_onchange(i);
		}
	}
}


function apply_bosu_set(){  //보수료 적용
			//alert($("#apply_date").val());
	for(i=1;i<=<?=$view_num?>;i++){
		$("input:text[name='ap1_by_"+i+"']").val(commax($("input:hidden[name='ijeon_bosu_"+i+"']").val()));
		$("input:text[name='aq1_by_"+i+"']").val(commax($("input:hidden[name='proof_cost_"+i+"']").val()));
		$("input:text[name='as1_by_"+i+"']").val(commax($("input:hidden[name='sintak_bosu_"+i+"']").val()));
		
		// 최초입력 인지매입액 계산 적용
		// 완납증명서 인지매입액 계산 적용
		// 비용안내 인지매입액 계산 적용
		f_onchange(i);
	}
}

function apply_jeng_set(){  //증지 적용
			//alert($("#apply_date").val());
	for(i=1;i<=<?=$view_num?>;i++){
		if($("#apply_jeng").val()!=""){  //날짜일때
			if($("input:checkbox[name='an1_by1_"+i+"']").is(":checked")==true){
				$("input:text[name='an1_by_"+i+"']").val($("#apply_jeng").val());
	//					alert($("input:text[name='an1_"+i+"']").val());
			}
			f_onchange(i);
		}
	}
}

function apply_scost_set(){  //신탁말소보수료  적용
			//alert($("#apply_date").val());
	for(i=1;i<=<?=$view_num?>;i++){
		if($("#apply_scost").val()!=""){  //날짜일때
			if($("input:checkbox[name='as1_by1_"+i+"']").is(":checked")==true){
				$("input:text[name='as1_by_"+i+"']").val($("#apply_scost").val());
			}
			f_onchange(i);
		}
	}
}

function apply_sccost_set(){  //신탁말소등록세  적용
			//alert($("#apply_date").val());
	for(i=1;i<=<?=$view_num?>;i++){
		if($("#apply_sccost").val()!=""){  //날짜일때
			if($("input:checkbox[name='ao1_by1_"+i+"']").is(":checked")==true){
				$("input:text[name='ao1_by_"+i+"']").val($("#apply_sccost").val());
			}
			f_onchange(i);
		}
	}
}

function apply_jae_set(){  //제증명  적용
			//alert($("#apply_date").val());
	for(i=1;i<=<?=$view_num?>;i++){
		if($("#apply_jae").val()!=""){  //날짜일때
			if($("input:checkbox[name='ap1_by1_"+i+"']").is(":checked")==true){
				$("input:text[name='ap1_by_"+i+"']").val($("#apply_jae").val());
			}
			f_onchange(i);
		}
	}
}

function apply_soi_set(){  //소이등보수료  적용
			//alert($("#apply_date").val());
	for(i=1;i<=<?=$view_num?>;i++){
		if($("#apply_soi").val()!=""){  //날짜일때
			if($("input:checkbox[name='aq1_by1_"+i+"']").is(":checked")==true){
				$("input:text[name='aq1_by_"+i+"']").val($("#apply_soi").val());
			}
			f_onchange(i);
		}
	}
}


function apply_1cha_set(){  //1차비용안내금액  적용
			//alert($("#apply_date").val());
	for(i=1;i<=<?=$view_num?>;i++){

		if($("#apply_1cha").val()=="1"){//Normal(취본희망시 그외비용적용)		
			if($("input:checkbox[name='gch1_cost1_"+i+"']").is(":checked")==true){
				if($("input:checkbox[name='al1_hope_yn_"+i+"']").is(":checked")==true){
					$("input:text[name='gch1_cost_"+i+"']").val($("input:text[name='etc_cost_sum_"+i+"']").val());
				} else {
					$("input:text[name='gch1_cost_"+i+"']").val($("").val());
				}
			}
		} else if($("#apply_1cha").val()=="2"){//총비용		
			if($("input:checkbox[name='gch1_cost1_"+i+"']").is(":checked")==true){
				$("input:text[name='gch1_cost_"+i+"']").val($("input:text[name='total_sum_"+i+"']").val());
			}
		} else if($("#apply_1cha").val()=="3"){//그외비용		
			if($("input:checkbox[name='gch1_cost1_"+i+"']").is(":checked")==true){
				$("input:text[name='gch1_cost_"+i+"']").val($("input:text[name='etc_cost_sum_"+i+"']").val());
			}
		} else if($("#apply_1cha").val()=="4"){//취득세ONLY		
			if($("input:checkbox[name='gch1_cost1_"+i+"']").is(":checked")==true){
				$("input:text[name='gch1_cost_"+i+"']").val($("input:text[name='al1_"+i+"']").val());
			}
		} else if($("#apply_1cha").val()=="5"){//취득세ONLY(취본)		
			if($("input:checkbox[name='gch1_cost1_"+i+"']").is(":checked")==true){
				$("input:text[name='gch1_cost_"+i+"']").val("0");
			}
		}
	}
}

function apply_2cha_set(){  //2차비용안내금액  적용
			//alert($("#apply_date").val());
	for(i=1;i<=<?=$view_num?>;i++){

		if($("#apply_2cha").val()=="1"){//2차비용안내일때		
			if($("input:checkbox[name='gch2_cost1_"+i+"']").is(":checked")==true){
				$("input:text[name='gch2_cost_"+i+"']").val($("input:hidden[name='s_sum_"+i+"']").val());
			}
		} else if($("#apply_2cha").val()=="2"){//2차비용안내일때		
			if($("input:checkbox[name='gch2_cost1_"+i+"']").is(":checked")==true){
				$("input:text[name='gch2_cost_"+i+"']").val($("input:text[name='etc_cost_sum_"+i+"']").val());
			}
		} else if($("#apply_2cha").val()=="3"){//취득세ONLY		
			if($("input:checkbox[name='gch2_cost1_"+i+"']").is(":checked")==true){
				$("input:text[name='gch2_cost_"+i+"']").val($("input:text[name='al1_"+i+"']").val());
			}
		}
	}
}

function apply(){  //적용
			//alert($("#apply_date").val());
	for(i=1;i<=<?=$view_num?>;i++){
		if($("#apply_date").val()!=""){  //날짜일때
			//alert($("#apply_date").val());
			if($("input:checkbox[name='gch1_cost_date1_"+i+"']").is(":checked")==true){
				$("input:text[name='gch1_cost_date_"+i+"']").val($("#apply_date").val());
			}
			if($("input:checkbox[name='gch2_cost_date1_"+i+"']").is(":checked")==true){
				$("input:text[name='gch2_cost_date_"+i+"']").val($("#apply_date").val());
			}
			if($("input:checkbox[name='dun_cost_date1_"+i+"']").is(":checked")==true){
				$("input:text[name='dun_cost_date_"+i+"']").val($("#apply_date").val());
			}
			//alert($("input:checkbox[name='confirm_date1_"+i+"']").is(":checked"));
			if($("input:checkbox[name='pay_dead_date1_"+i+"']").is(":checked")==true){
				$("input:text[name='pay_dead_date_"+i+"']").val($("#apply_date").val());
			}
		}
	}
}


function f_onchange(i){  //적용
	// 취득세
	if($("input:text[name='al1_"+i+"']").val()!=""){
		a = Number(de_comma($("input:text[name='al1_"+i+"']").val()));
	} else {
		a = 0;
	}
	// 인지세
	if($("input:text[name='am1_pur_cost_"+i+"']").val()!=""){
		b = Number(de_comma($("input:text[name='am1_pur_cost_"+i+"']").val()));
	} else {
		b = 0;
	}
	// 이전채권본인부담금
	if($("input:text[name='aj1_tmp_"+i+"']").val()!=""){
		c = Number(de_comma($("input:text[name='aj1_tmp_"+i+"']").val()));
	} else {
		c = 0;
	}
	// 설정채권본인부담금
	if($("input:text[name='ak1_tmp_"+i+"']").val()!=""){
		d = Number(de_comma($("input:text[name='ak1_tmp_"+i+"']").val()));
	} else {
		d = 0;
	}
	// 증지
	if($("input:text[name='an1_by_"+i+"']").val()!=""){
		e = Number(de_comma($("input:text[name='an1_by_"+i+"']").val()));
	} else {
		e = 0;
	}
	// 신탁말소보수료
	if($("input:text[name='as1_by_"+i+"']").val()!=""){
		f = Number(de_comma($("input:text[name='as1_by_"+i+"']").val()));
	} else {
		f = 0;
	}
	// 신탁말소등록세
	if($("input:text[name='ao1_by_"+i+"']").val()!=""){
		g = Number(de_comma($("input:text[name='ao1_by_"+i+"']").val()));
	} else {
		g = 0;
	}
	// 제증명
	if($("input:text[name='ap1_by_"+i+"']").val()!=""){
		h = Number(de_comma($("input:text[name='ap1_by_"+i+"']").val()));
	} else {
		h = 0;
	}
	// 소이등보수료
	if($("input:text[name='aq1_by_"+i+"']").val()!=""){
		j = Number(de_comma($("input:text[name='aq1_by_"+i+"']").val()));
	} else {
		j = 0;
	}
//	alert($("input:text[name='etc_cost_sum_"+i+"']").val());
	// 그외비용소계
//	if($("input:text[name='aq1_by_"+i+"']").val()!=""){
//		j = Number(de_comma($("input:text[name='aq1_by_"+i+"']").val()));
//	} else {
//		j = 0;
//	}
	k = b + c + d + e + f + g + h + j;
	//alert(j);
	l = a + k;
	//alert($("input:text[name='etc_cost_sum_"+i+"']").val());
	$("input:text[name='etc_cost_sum_"+i+"']").val(commax(k));
	$("input:text[name='total_sum_"+i+"']").val(commax(l));
}


$(document).ready(function(){
	$("#gch1_cost_date_ch").click(function(e){ 
		if($(this).is(":checked")){
			//alert(1);
			$(".gch1_cost_date").prop("checked", true);
		}else{
			//alert(0);
			$(".gch1_cost_date").prop("checked", false);
		}
	});

	$("#gch2_cost_date_ch").click(function(e){ 
		if($(this).is(":checked")){
			$(".gch2_cost_date").prop("checked", true);
		}else{
			$(".gch2_cost_date").prop("checked", false);
		}
	});


	$("#dun_cost_date_ch").click(function(e){ 
		if($(this).is(":checked")){
			$(".dun_cost_date").prop("checked", true);
		}else{
			$(".dun_cost_date").prop("checked", false);
		}
	});

	$("#pay_dead_date_ch").click(function(e){ 
		if($(this).is(":checked")){
			$(".pay_dead_date").prop("checked", true);
		}else{
			$(".pay_dead_date").prop("checked", false);
		}
	});

	$("#bond_sale_rate_ch").click(function(e){ 
		if($(this).is(":checked")){
			//alert(1);
			$(".bond_sale_rate").prop("checked", true);
		}else{
			//alert(0);
			$(".bond_sale_rate").prop("checked", false);
		}
	});

	$("#an1_by_ch").click(function(e){ 
		if($(this).is(":checked")){
			$(".an1_by").prop("checked", true);
		}else{
			$(".an1_by").prop("checked", false);
		}
	});


	$("#as1_by_ch").click(function(e){ 
		if($(this).is(":checked")){
			$(".as1_by").prop("checked", true);
		}else{
			$(".as1_by").prop("checked", false);
		}
	});


	$("#ao1_by_ch").click(function(e){ 
		if($(this).is(":checked")){
			$(".ao1_by").prop("checked", true);
		}else{
			$(".ao1_by").prop("checked", false);
		}
	});

	$("#ap1_by_ch").click(function(e){ 
		if($(this).is(":checked")){
			$(".ap1_by").prop("checked", true);
		}else{
			$(".ap1_by").prop("checked", false);
		}
	});

	$("#aq1_by_ch").click(function(e){ 
		if($(this).is(":checked")){
			$(".aq1_by").prop("checked", true);
		}else{
			$(".aq1_by").prop("checked", false);
		}
	});

	$("#gch1_cost_ch").click(function(e){ 
		if($(this).is(":checked")){
			$(".gch1_cost").prop("checked", true);
		}else{
			$(".gch1_cost").prop("checked", false);
		}
	});

	$("#gch2_cost_ch").click(function(e){ 
		if($(this).is(":checked")){
			$(".gch2_cost").prop("checked", true);
		}else{
			$(".gch2_cost").prop("checked", false);
		}
	});

//	$('#btn1').blur(function(e) {
//		a = Number($('#a1_txt').val());
//		b = Number($('#b1_txt').val());
//		c = a + b;
//		$('#c1_txt').val(c);
//	});

});

function f_excel(){  //엑셀다운
	if(<?=$rows_total?>==0){
		alert("총 0건 입니다.");
	}else{
		var frm    = document.ffx;
		frm.action = "excel_down.php";
		frm.method = "post";
		frm.submit();
		frm.action = "index.html";
	}
}

function f_detail_excel(){  //엑셀상세다운
	if(<?=$rows_total?>==0){
		alert("총 0건 입니다.");
	}else{
		var frm    = document.ffx;
		frm.action = "excel_detail_down.php";
		frm.method = "post";
		frm.submit();
		frm.action = "index.html";
	}
}

function f_submitx(){
	if(document.ffx.h_idx.value==""){
		alert("현장은 필수항목입니다.");
		$('#h_idx').focus();
	}	else{
		document.ffx.page.value=1;
		document.ffx.target="_self";
		document.ffx.action = "index.html";
		document.ffx.submit();
	}
}
function f_submit(){
	var v = document.ffm;
	if(confirm("저장하시겠습니까?")){
		var frm    = document.ffm;
		var url    = "post.php";
		var title  = "listpop22";
		var status = "toolbar=no,directories=no,scrollbars=no,resizable=no,status=no,menubar=no,width=100, height=100, top=400,left=800"; 
		var aa2 = window.open("", title,status);
		frm.target = title;
		frm.action = url;
		frm.method = "post";
		frm.submit();
		aa2.focus();
	}
}



</script>

</body>
</html>
